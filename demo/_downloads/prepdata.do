***********************************************************************************************************************
* Analysis of PSID Data
* Author: Guang Zuo
* Data:   Apr.18,2014

*********************************************************************************************************************
* 1. Take data from PSID data files
psiduse ///
	|| age [68]ER30004 [69]ER30023 [70]ER30046 [71]ER30070 [72]ER30094 [73]ER30120 [74]ER30141 [75]ER30163 [76]ER30191 [77]ER30220 [78]ER30249 ///
           [79]ER30286 [80]ER30316 [81]ER30346 [82]ER30376 [83]ER30402 [84]ER30432 [85]ER30466 [86]ER30501 [87]ER30538 [88]ER30573 [89]ER30609 ///
           [90]ER30645 [91]ER30692 [92]ER30736 [93]ER30809 [94]ER33104 [95]ER33204 [96]ER33304 [97]ER33404 [99]ER33504 [01]ER33604 [03]ER33704 ///
	       [05]ER33804 [07]ER33904 [09]ER34004 [11]ER34104   ///
	|| educ [68]V313 [69]V794 [70]V1485 [71]V2197 [72]V2823 [73]V3241 [74]V3663 [75]V4093 [76]V4684 [77]V5608 [78]V6157 ///
			[79]V6754 [80]V7387 [81]V8039 [82]V8663 [83]V9349 [84]V10996 [85]V12400 [86]V13640 [87]V14687 [88]V16161 ///
			[89]V17545 [90]V18898 [91]V20198 [92]V21504 [93]V23333 [94]ER4158 [95]ER6998 [96]ER9249 [97]ER12222 ///
			[99]ER16516 [01]ER20457 [03]ER24148 [05]ER28047 [07]ER41037 [09]ER46981 [11]ER52405      ///  
    || race [68]V181 [69]V801 [70]V1490 [71]V2202 [72]V2828 [73]V3300 [74]V3720 [75]V4204 [76]V5096 [77]V5662 [78]V6209 ///
	        [79]V6802 [80]V7447 [81]V8099 [82]V8723 [83]V9408 [84]V11055 [85]V11938 [86]V13565 [87]V14612 [88]V16086 ///
	        [89]V17483 [90]V18814 [91]V20114 [92]V21420 [93]V23276 [94]ER3944 [95]ER6814 [96]ER9060 [97]ER11848 ///
	        [99]ER15928 [01]ER19989 [03]ER23426 [05]ER27393 [07]ER40565 [09]ER46543 [11]ER51904  ///
	|| indwgt [68]ER30019 [69]ER30042 [70]ER30066 [71]ER30090 [72]ER30116 [73]ER30137 [74]ER30159 [75]ER30187 [76]ER30216 ///
			  [77]ER30245 [78]ER30282 [79]ER30312 [80]ER30342 [81]ER30372 [82]ER30398 [83]ER30428 [84]ER30462 [85]ER30497 ///
			  [86]ER30534 [87]ER30569 [88]ER30605 [89]ER30641 [90]ER30686 [91]ER30730 [92]ER30803 [93]ER30864 [94]ER33119 ///
			  [95]ER33275 [96]ER33318 [97]ER33430 [99]ER33546 [01]ER33637 [03]ER33740 [05]ER33848 [07]ER33950 [09]ER34045 ///
			  [11]ER34154  ///
	|| empstatus [68]V196 [69]V639 [70]V1278 [71]V1983 [72]V2581 [73]V3114 [74]V3528 [75]V3967 [76]V4458 [77]V5373 [78]V5872 ///
                 [79]V6492 [80]V7095 [81]V7706 [82]V8374 [83]V9005 [84]V10453 [85]V11637 [86]V13046 [87]V14146 [88]V15154 ///
			     [89]V16655 [90]V18093 [91]V19393 [92]V20693 [93]V22448 [94]ER2068 [95]ER5067 [96]ER7163 [97]ER10081 [99]ER13205 ///
                 [01]ER17216 [03]ER21123 [05]ER25104 [07]ER36109 [09]ER42140 [11]ER47448  ///
	|| industry [68]V197_B [69]V640_B [70]V1279_B [71]V1985_A [72]V2583_A [73]V3116_A [74]V3531_A [75]V3969_A [76]V4460_A ///
                [77]V5375_A [78]V5874_A [79]V6498_A [80]V7101_A [81]V7713 [82]V8381 [83]V9012 [84]V10461 [85]V11652 [86]V13055 ///
				[87]V14155 [88]V15163 [89]V16664 [90]V18102 [91]V19402 [92]V20702 [93]V22457 [94]ER4018 [95]ER6858 [96]ER9109 ///
				[97]ER12086 [99]ER13216 [01]ER17227 [03]ER21146 [05]ER25128 [07]ER36133 [09]ER42168 [11]ER47480 ///
    || relation [68]ER30003 [69]ER30022 [70]ER30045 [71]ER30069 [72]ER30093 [73]ER30119 [74]ER30140 [75]ER30162 [76]ER30190 ///
                [77]ER30219 [78]ER30248 [79]ER30285 [80]ER30315 [81]ER30345 [82]ER30375 [83]ER30401 [84]ER30431 [85]ER30465 ///
				[86]ER30500 [87]ER30537 [88]ER30572 [89]ER30608 [90]ER30644 [91]ER30691 [92]ER30735 [93]ER30808 [94]ER33103 ///
				[95]ER33203 [96]ER33303 [97]ER33403 [99]ER33503 [01]ER33603 [03]ER33703 [05]ER33803 [07]ER33903 [09]ER34003 ///
				[11]ER34103 ///
    || inchead [68]V74 [69]V514 [70]V1196 [71]V1897 [72]V2498 [73]V3051 [74]V3463 [75]V3863 [76]V5031 [77]V5627 [78]V6174 ///
               [79]V6767 [80]V7413 [81]V8066 [82]V8690 [83]V9376 [84]V11023 [85]V12372 [86]V13624 [87]V14671 [88]V16145 ///
		       [89]V17534 [90]V18878 [91]V20178 [92]V21484 [93]V23323 [94]ER4140 [95]ER6980 [96]ER9231 [97]ER12080 ///
		       [99]ER16463 [01]ER20443 [03]ER24116 [05]ER27931 [07]ER40921 [09]ER46829 [11]ER52237 ///
	|| incwife [68]V75 [69]V516 [70]V1198 [71]V1899 [72]V2500 [73]V3053 [74]V3465 [75]V3865 [76]V4379 [77]V5289 [78]V5788 ///
               [79]V6398 [80]V6988 [81]V7580 [82]V8273 [83]V8881 [84]V10263 [85]V11404 [86]V12803 [87]V13905 [88]V14920 ///
		       [89]V16420 [90]V17836 [91]V19136 [92]V20436 [93]V23324 [94]ER4144 [95]ER6984 [96]ER9235 [97]ER12082 ///
		       [99]ER16465 [01]ER20447 [03]ER24135 [05]ER27943 [07]ER40933 [09]ER46841 [11]ER52249  ///
	|| wagehead [71]V1892 [72]V2493 [73]V3046 [74]V3458 [75]V3858 [76]V4373 [77]V5283 [78]V5782 [79]V6391 [80]V6981 [81]V7573 ///
                [82]V8265 [83]V8873 [84]V10256 [85]V11397 [86]V12796 [87]V13898 [88]V14913 [89]V16413 [90]V17829 [91]V19129 ///
		        [92]V20429 [93]V21739 [94]ER4122 [95]ER6962 [96]ER9213 [97]ER12196 [99]ER16493 [01]ER20425 [03]ER24117 ///
		        [05]ER27913 [07]ER40903 [09]ER46811 [11]ER52219 ///
	|| faminc [68]V81 [69]V529 [70]V1514 [71]V2226 [72]V2852 [73]V3256 [74]V3676 [75]V4154 [76]V5029 [77]V5626 [78]V6173 [79]V6766 ///
              [80]V7412 [81]V8065 [82]V8689 [83]V9375 [84]V11022 [85]V12371 [86]V13623 [87]V14670 [88]V16144 [89]V17533 [90]V18875 ///
	          [91]V20175 [92]V21481 [93]V23322 [94]ER4153 [95]ER6993 [96]ER9244 [97]ER12079 [99]ER16462 [01]ER20456 [03]ER24099 ///
	          [05]ER28037 [07]ER41027 [09]ER46935 [11]ER52343  ///
	|| famwgt [68]V439 [69]V1014 [70]V1609 [71]V2321 [72]V2968 [73]V3301 [74]V3721 [75]V4224 [76]V5099 [77]V5665 [78]V6212 [79]V6805 ///
              [80]V7451 [81]V8103 [82]V8727 [83]V9433 [84]V11079 [85]V12446 [86]V13687 [87]V14737 [88]V16208 [89]V17612 [90]V18943 ///
	          [91]V20243 [92]V21547 [93]V23361 [94]ER4160 [95]ER7000 [96]ER9251 [97]ER12084 [99]ER16518 [01]ER20394 [03]ER24179 ///
	          [05]ER28078 [07]ER41069 [09]ER47012 [11]ER52436  ///
	|| region [68]V361 [69]V876 [70]V1572 [71]V2284 [72]V2911 [73]V3279 [74]V3699 [75]V4178 [76]V5054 [77]V5633 [78]V6180 [79]V6773 ///
              [80]V7419 [81]V8071 [82]V8695 [83]V9381 [84]V11028 [85]V12379 [86]V13631 [87]V14678 [88]V16152 [89]V17538 [90]V18889 ///
	          [91]V20189 [92]V21495 [93]V23327 [94]ER4157E [95]ER6997E [96]ER9248E [97]ER12221E [99]ER16430 [01]ER20376 [03]ER24143 ///
	          [05]ER28042 [07]ER41032 [09]ER46974 [11]ER52398  ///
	|| homeowner [68]V103 [69]V593 [70]V1264 [71]V1967 [72]V2566 [73]V3108 [74]V3522 [75]V3939 [76]V4450 [77]V5364 [78]V5864 [79]V6479 ///
                 [80]V7084 [81]V7675 [82]V8364 [83]V8974 [84]V10437 [85]V11618 [86]V13023 [87]V14126 [88]V15140 [89]V16641 [90]V18072 ///
		         [91]V19372 [92]V20672 [93]V22427 [94]ER2032 [95]ER5031 [96]ER7031 [97]ER10035 [99]ER13040 [01]ER17043 [03]ER21042 ///
		         [05]ER25028 [07]ER36028 [09]ER42029 [11]ER47329  ///
	|| housevalue [68]V5 [69]V449 [70]V1122 [71]V1823 [72]V2423 [73]V3021 [74]V3417 [75]V3817 [76]V4318 [77]V5217 [78]V5717 [79]V6319 ///
                  [80]V6917 [81]V7517 [82]V8217 [83]V8817 [84]V10018 [85]V11125 [86]V12524 [87]V13724 [88]V14824 [89]V16324 [90]V17724 ///
		          [91]V19024 [92]V20324 [93]V21610 [94]ER2033 [95]ER5032 [96]ER7032 [97]ER10036 [99]ER13041 [01]ER17044 [03]ER21043 ///
		          [05]ER25029 [07]ER36029 [09]ER42030 [11]ER47330   ///
	|| familysize [68]V115 [69]V493 [70]V1167 [71]V1868 [72]V2468 [73]V3017 [74]V3437 [75]V3837 [76]V4346 [77]V5254 [78]V5755 [79]V6361 ///
                 [80]V6959 [81]V7551 [82]V8249 [83]V8851 [84]V10222 [85]V11364 [86]V12763 [87]V13867 [88]V14889 [89]V16389 [90]V17798 ///
		         [91]V19098 [92]V20398 [93]V22405 [94]ER2006 [95]ER5005 [96]ER7005 [97]ER10008 [99]ER13009 [01]ER17012 [03]ER21016 ///
		         [05]ER25016 [07]ER36016 [09]ER42016 [11]ER47316  ///
	|| sex    [68]ER32000   ///
	using ./psid, design(any)

*********************************************************************************************************************
* 2. Follow Lochner (2014), use CPI-U-RS to deflate the annual earnings
* Note: Dec.1977 = 100
generate CPIURS1968 = 58.3
label variable CPIURS1968 "1968 CPI-U-RS"
	
generate CPIURS1969 = 60.9
label variable CPIURS1969 "1969 CPI-U-RS"	
	
generate CPIURS1970 = 63.9
label variable CPIURS1970 "1970 CPI-U-RS"	

generate CPIURS1971 = 66.7
label variable CPIURS1971 "1971 CPI-U-RS"

generate CPIURS1972 = 68.7
label variable CPIURS1972 "1972 CPI-U-RS"

generate CPIURS1973 = 73.0
label variable CPIURS1973 "1973 CPI-U-RS"

generate CPIURS1974 = 80.3
label variable CPIURS1974 "1974 CPI-U-RS"

generate CPIURS1975 = 86.9
label variable CPIURS1975 "1975 CPI-U-RS"

generate CPIURS1976 = 91.9
label variable CPIURS1976 "1976 CPI-U-RS"

generate CPIURS1977 = 97.9
label variable CPIURS1977 "1977 CPI-U-RS"

generate CPIURS1978 = 104.4
label variable CPIURS1978 "1978 CPI-U-RS"

generate CPIURS1979 = 114.4
label variable CPIURS1979 "1979 CPI-U-RS"

generate CPIURS1980 = 127.1
label variable CPIURS1980 "1980 CPI-U-RS"

generate CPIURS1981 = 139.2
label variable CPIURS1981 "1981 CPI-U-RS"

generate CPIURS1982 = 147.6
label variable CPIURS1982 "1982 CPI-U-RS"

generate CPIURS1983 = 153.9
label variable CPIURS1983 "1983 CPI-U-RS"
	
generate CPIURS1984 = 160.2
label variable CPIURS1984 "1984 CPI-U-RS"	

generate CPIURS1985 = 165.7
label variable CPIURS1985 "1985 CPI-U-RS"	

generate CPIURS1986 = 168.7
label variable CPIURS1986 "1986 CPI-U-RS"	

generate CPIURS1987 = 174.4
label variable CPIURS1987 "1987 CPI-U-RS"	

generate CPIURS1988 = 180.8
label variable CPIURS1988 "1988 CPI-U-RS"

generate CPIURS1989 = 188.6
label variable CPIURS1989 "1989 CPI-U-RS"

generate CPIURS1990 = 198.0
label variable CPIURS1990 "1990 CPI-U-RS"

generate CPIURS1991 = 205.1
label variable CPIURS1991 "1991 CPI-U-RS"

generate CPIURS1992 = 210.3
label variable CPIURS1992 "1992 CPI-U-RS"

generate CPIURS1993 = 215.5
label variable CPIURS1993 "1993 CPI-U-RS"

generate CPIURS1994 = 220.1
label variable CPIURS1994 "1994 CPI-U-RS"

generate CPIURS1995 = 225.4
label variable CPIURS1995 "1995 CPI-U-RS"

generate CPIURS1996 = 231.4
label variable CPIURS1996 "1996 CPI-U-RS"

generate CPIURS1997 = 236.4
label variable CPIURS1997 "1997 CPI-U-RS"

generate CPIURS1999 = 244.7
label variable CPIURS1999 "1999 CPI-U-RS"

generate CPIURS2001 = 260.0
label variable CPIURS2001 "2001 CPI-U-RS"

generate CPIURS2003 = 270.1
label variable CPIURS2003 "2003 CPI-U-RS"

generate CPIURS2005 = 286.7
label variable CPIURS2005 "2005 CPI-U-RS"

generate CPIURS2007 = 304.5
label variable CPIURS2007 "2007 CPI-U-RS"

generate CPIURS2009 = 315.0
label variable CPIURS2009 "2009 CPI-U-RS"

generate CPIURS2011 = 330.3
label variable CPIURS2011 "2011 CPI-U-RS"	


*********************************************************************************************************************
* 3. 
*sort age1968


save psid_combined_unbalanced.dta, replace	
